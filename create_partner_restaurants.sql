CREATE TABLE public.partner_restaurants (id bigint PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL, name text NOT NULL, description text, address text NOT NULL, phone text NOT NULL, email text NOT NULL, website text, image_url text, cuisine_type text NOT NULL, price_range text NOT NULL, opening_hours text NOT NULL); ALTER TABLE public.partner_restaurants ENABLE ROW LEVEL SECURITY; CREATE POLICY "Permettre la lecture publique des restaurants partenaires" ON public.partner_restaurants FOR SELECT TO public USING (true); CREATE POLICY "Permettre l'Ã©criture aux administrateurs" ON public.partner_restaurants FOR ALL TO authenticated USING (EXISTS (SELECT 1 FROM public.profiles WHERE profiles.id = auth.uid() AND profiles.role = 'admin'));
